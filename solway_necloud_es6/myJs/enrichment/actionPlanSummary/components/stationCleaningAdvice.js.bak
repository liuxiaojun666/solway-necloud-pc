ajaxData(
    {

    },
    {
        __serviceName__: 'actionPlanSummaryStationCleaningAdviceService',
    }
)('actionPlanSummaryStationCleaningAdviceCtrl', ['$scope', 'actionPlanSummaryStationCleaningAdviceService', 'actionRecord'], ($scope, myAjaxData, historicalRecord) => {
    /// 初始化 scope
    $scope.initChildScope($scope, myAjaxData);

    // 主页面初始化完成 回调
    $scope.mainPageInitComplete = async () => {
        let { tabIndex = 0 } = historicalRecord.get().actionPlanSummaryStationCleaningAdvice || {};
        $scope.changeTab(tabIndex);
        $('.ng-clock').removeClass('ng-clock');
        $scope.initComplete = true;
        await myAjaxData.timeout(0);
        await $scope.diffGetData();
        $scope.$apply();
    };

    $scope.xdata = [
        '8-31', '9-01', '9-02', '9-03', '9-04', '9-05', '9-06', '9-07', '9-08', '9-09', '9-10', '9-11', '9-12', '9-13', '9-14', '9-15', '9-16', '9-17', '9-18', '9-19', '9-20',
    ];
    $scope.ydatas = [
        [
            [31, 1, 42, 3, 442, 253, 6, 475, 8, 96, 160, 181, 912, 213, 114, 15, 16, 17, 18, 19, 20,]
        ],
        [
            [31, 1, 2, 53, 54, 525, 526, 527, 528, 529, 521, 5211, 25122, 13, 214, 15, 16, 17, 18, 19, 20,]
        ]
    ];

    // 切换电站 回调
    $scope.switchPowerCallback = () => {
        $scope.diffGetData();
    };

    // tab 切换
    $scope.changeTab = tabIndex => {
        $scope.tabIndex = tabIndex;
        historicalRecord.set({
            actionPlanSummaryStationCleaningAdvice: {
                ...historicalRecord.get().actionPlanSummaryStationCleaningAdvice || {},
                tabIndex
            }
        });
        $scope.diffGetData();
    };

    // 接口请求
    $scope.diffGetData = async (getInfo) => {
        if (!$scope.initComplete) return;
        await myAjaxData.timeout(0);
        setDataNull(getInfo);
        const { tabIndex, dataType } = $scope;
        if (dataType !== 0) return;
    };

    // 数据置空
    function setDataNull(getInfo) {

    }

    // 销毁 事件
    $scope.$on('$destroy', () => {
        setDataNull();
    });
});