ajaxData({
    groupList: {
        name: 'GETgroupList',
        data: {},
        later: true
    },
    powerStationsBelongsGroup:{
        name: 'GETpowerStationsBelongsGroup',
        data: {},
        later: true
    },
    // update: {
    //     name: 'POSTupdateDepartment',
    //     data: {},
    //     later: true
    // },
    // depDelete:{
    //     name: 'POSTdeleteDepartment',
    //     data: {},
    //     later: true
    // }
}, {})('stationGroupManagementCtrl', ['$scope', 'myAjaxData', 'actionRecord', '$timeout','toaster'], ($scope, myAjaxData, historicalRecord, $timeout,toaster) => {
    $scope.moduleName = '电站分组管理';//当前页面名称；
    
    
    $scope.initGroupList = () =>{
        $scope.groupList.getData().then(res=>{
            $scope.groupList = res.data;
        });
    }

    $scope.initGroupList();

    const getStationListData = groupId =>{
        $scope.powerStationsBelongsGroup.getData({
            pageIndex:0,
            pageSize: 10,
            groupid: groupId
        }).then(res=>{
            $scope.column = [
                {
                    title: '电站名称',
                    dataIndex: 'name',
                    align: 'left',
                    sort: true
                }, {
                    title: '装机容量',
                    dataIndex: 'build',
                    align: 'center'
                }, {
                    title: '地址',
                    dataIndex: 'address',
                    align: 'center',
                    sort: true
                },
                 {
                    title: '操作',
                    align: 'center',
                    dataIndex:'id',
                    render(text,item,index) {
                        return `
                        <div class="clearfix">
                            <i class="iconfont edit icon-shanchu1" style="font-size: 18px;color:#ff8080;"></i>
                        </div>
                        `
                    },
                }
            ]
        });
    }
    //选中组
    $scope.chooseGroup = (item,index) =>{
        $scope.selected = index;
        getStationListData(item.id);
    }

    //hover
    $scope.hoverGroup = (item,index)=>{
        $scope.currentIndex = index;
    }

    // //删除
    // $scope.delete = () =>{
    //     $solway.confirm({ message: '确定删除此部门？' }, () => {
    //         $scope.depDelete.getData({
    //             id: $scope.depid
    //         }).then(res=>{
    //             if(res.key == 3){
    //                 toaster.pop('error', '','请先删除下级部门')
    //             }else if (res.key==2) {
    //                 toaster.pop('success','','保存成功');
    //                 initDepartmentList();
    //             } else if (res.key==1) {
    //                 toaster.pop('error', '','保存失败')
    //             }
    //         })
    //     });
    // }

  

    
 
    $timeout(() => {
        $('.ng-clock').removeClass('ng-clock');
    },2000);
});