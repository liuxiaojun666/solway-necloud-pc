ajaxData({
    pageData: {
        name: 'GETBasicSituationInfo',
        data: {
            pageIndex: 0,
            pageSize: 10,
        },
        later:true
    }
}, {
    __serviceName__:'themeBasicSituationAjaxData'
})('themeBasicSituationCtrl', ['$scope', 'themeBasicSituationAjaxData', 'historicalRecord'], ($scope, myAjaxData, historicalRecord) => {
    $scope.initChildScope($scope, myAjaxData);

    const initParams = () => {
        const params = historicalRecord.get();
        if (params.detailFullPage) return false; //放大状态，不做处理
        $scope.roleType = params.stationData.dataType;//电站（0）和非电站
        $scope.dateType = params.dateType;//日期类型（日、月、年、累计；0、1、2、3）
        $scope.getAjaxData() //接口
    }

    //父页面初始化完成
    $scope.mainPageInitComplete = () => {
        initParams();
    };

    //切换日期类型
    $scope.dateUpdated = () =>{
        $scope.getAjaxData();
    }

    //切换电站
    $scope.switchPowerCallback = () => {
        $scope.getAjaxData();
    }

    //点击放大后
    $scope.switchDetailFullPage = () =>{
        $scope.getAjaxData();
    }

    $scope.getAjaxData = () =>{
        const queryType = $scope.roleType?1:3 //集团1，电站3
        const dateType = $scope.dateType == 0 ? 3 : ($scope.dateType == 1?2:1)
        $scope.pageData.getData({
            'queryType': queryType,
            'date': $scope.dateTime,
            'dateType': dateType
        }).then(res => {
            // debugger
            console.log(res)
            // debugger
        })
    }

    // //处理成接口需要的参数
    // $scope.dealWithParams = () =>{

    // }
});