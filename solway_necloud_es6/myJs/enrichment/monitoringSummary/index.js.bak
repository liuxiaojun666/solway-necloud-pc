ajaxData({
    defaultStation: {
        name: 'GETUserAuthHandleSetSTClass',
        data: {},
        later: true
    },
    changeStation: {
        name: 'GETUserAuthHandleChangeDataType',
        data: {},
        later: true
    }
}, {})('monitoringSummaryCtrl', ['$scope', 'myAjaxData', 'historicalRecord'], ($scope, myAjaxData, historicalRecord) => {
    // 当前页面行为记录初始化回调 获取行为记录
    $scope.historyInitCallback = async () => {
        const historiData = historicalRecord.get();
        const { 
            dateType = 2,
            dateTime = new Date([2017, 1, 2]),
            theme = 'BasicSituation', 
            stationData 
        } = historiData;

        $scope.dateTime = dateTime;
        $scope.dateType = dateType;
        $scope.theme = theme;
        if (!stationData) historicalRecord.set({ dateType, dateTime, theme });
        await diffStationInfo(stationData);
    };

    // 日期更新后回调   range 时间范围（日月年累计）    date 为日期
    $scope.dateUpdated = (dateType, dateTime) => {
        historicalRecord.set({ dateType, dateTime });
    };

    // 切换电站 回调
    $scope.switchPowerCallback = () => {
        historicalRecord.set({ stationData: myAjaxData.currentStationData });
    };

    // 切换主题模块
    $scope.changeTheme = theme => {
        $scope.theme = theme;
        historicalRecord.set({ theme });
    };

    // 电站 信息  对比
    async function diffStationInfo(stationData) {
        const currentStationData = await $scope._getStationInfo;
        if (!stationData.currentSTID) {
            // 没有记录电站信息  
            await myAjaxData.timeout(500);
        } else if (Object.is(currentStationData.currentSTID, stationData.currentSTID)) {
            // 电站信息 没有变化
            await myAjaxData.timeout(500);
        } else {
            // 电站信息  发生变化
            await $scope.changeStation.getData({

            })
        }
    }


});