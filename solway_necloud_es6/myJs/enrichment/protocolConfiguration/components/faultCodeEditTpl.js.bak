
ajaxData({
    // manufacturerList: {
    //     name: 'GETmanufacturerList',
    //     data: {},
    //     later: true,
    //     onlyLatest: true
    // },
    // selectByManuList: {
    //     name: 'GETselectByManuList',
    //     data: {},
    //     later: true,
    //     onlyLatest: true
    // },
    faultCodeUpdate: {
        name: 'POSTfaultCodeUpdate',
        data: {},
        later: true,
        saveParam: false,
        onlyLatest: true
    },
}, {
        __serviceName__: 'editFaultCodeService',
    })('editFaultCodeTplModelCtrl', ['$scope', 'editFaultCodeService', 'actionRecord', '$timeout', 'toaster', '$http'], ($scope, myAjaxData, historicalRecord, $timeout, toaster, $http) => {

        
        $scope.$on("editFaultCodeBroad", async (e, data) => {
            console.log(data)
            $scope.faultformData = {};
            await myAjaxData.timeout(0);
            $scope.$apply();

            if (data) {
                
                $scope.faultformData = {
                    id:data.id,
                    protocolID:data.protocolID,
                    faultCode:data.faultCode,
                    faultType:data.faultType,
                    faultDescCH:data.faultDescCH,
                    faultDescEN:data.faultDescEN,
                    faultHandle:data.faultHandle,
                    descp:data.descp,

                }
               
            } else {
                
            }
        });

        //保存
        $scope.save = () => {
            if (!$solway.formValidation($scope.faultformData, '.editFaultCodeTpl', toaster)) return;//校验非空

            $scope.faultCodeUpdate.getData($scope.faultformData).then(res => {
                // if (res.id) {
                //     toaster.pop('success', '', '保存成功');
                //     $scope.$emit('editCallback');
                // } else {
                //     toaster.pop('error', '', '保存失败')
                // }
            });
        }

        //取消
        $scope.cancel = () => {
            $scope.$emit('cancel');
        }

    });