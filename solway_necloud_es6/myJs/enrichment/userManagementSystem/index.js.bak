ajaxData({
    userList:{
        name: 'GETuserListSystem',
        data: {},
        later: true
    },
    // deleteAuthority: {
    //     name: 'POSTdeleteAuthority',
    //     data: {},
    //     later: true
    // }
}, {})('userManagementSystemCtrl', ['$scope', 'myAjaxData', 'actionRecord', '$timeout','toaster'], ($scope, myAjaxData, historicalRecord, $timeout,toaster) => {
    $scope.moduleName = '用户管理';//当前页面名称；

    $scope.getUserList = () =>{
        $scope.userList.getData({
            pageIndex : 0,
            pageSize : 10,
            userName : $scope.userNameS,
            keyWords : $scope.keyWords
        }).then(res=>{
            console.log(res)
        });
    }

    $scope.getUserList();
    
    $scope.column = [
        {
            title: '账号',
            dataIndex: 'userName',
            align: 'center',
            sort: !0
        },{
            title: '真实姓名',
            dataIndex: 'realName',
            sort: !0,
            align: 'center'
        }, {
            title: '所属公司',
            dataIndex: 'companyName',
            width:'20%',
            align: 'center',
            sort: !0
        }, {
            title: '上次登录时间',
            dataIndex: 'lastLoginTime',
            align: 'center',
            sort: !0
        }, {
            title: '邀请状态',
            dataIndex: 'invitestatus',
            align: 'center'
        }, {
            title: '状态',
            dataIndex: 'useStatus',
            align: 'center'
        }, {
            title: '操作',
            dataIndex: '',
            align: 'center',
            sort: !0,
            render(text, item, index) {
                return `
                <div class="clearfix">
                    <i class="iconfont edit icon-bianji-copy" style="font-size: 18px;color:#1ddabe;margin-right:15px;"></i>
                </div>
                `
            },
        }
    ]

    //新增
    $scope.newPerson = () =>{
        $scope.newPersonModel = true;
        $scope.$broadcast('broadAddPerson', { 'id': '' });
    }

    // $scope.trClick = (item, index, event) => {
    //     if(event.target.className.includes('icon-shouquan')) {
    //         $scope.showAuthorizeModel = true;
    //         $scope.$broadcast('broadAuthorizeModel', { 'id': item.id,'depId': $scope.depid });
    //     }else if(event.target.className.includes('icon-shanchu1')) {
    //         $solway.confirm({ message: '确定删除此人？' }, () => {
    //             deletePerson(item.id)
    //         });
    //     };
    // };




    $scope.$on('cancelCallback',()=>{
        $scope.newPersonModel = false;
    });

    $scope.$on('addCallback',()=>{
        $scope.newPersonModel = false;
        $scope.getUserList();
    });

    $timeout(() => {
        $('.ng-clock').removeClass('ng-clock');
    },2000);
});