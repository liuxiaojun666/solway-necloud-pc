ajaxData({
    getLoginUserInfo: {
        name: 'loginUserInfo',
        data: {},
        later: true
    },
    shareTaskDetailList: {
        name: 'GETShareTaskDetailList',
        data: {},
        later: true,
        onlyLatest: true
    },
}, {
        __serviceName__: 'sharedTaskDetailService'
    })('sharedTaskDetailCtrl', ['$scope', 'sharedTaskDetailService'], ($scope, myAjaxData) => {

        const resizeHeight = () => {
            $(".chat-panel-list").height($(window).height() - 230)
        }

        resizeHeight();
        window.addEventListener('resize', resizeHeight);

        //接收
        $scope.$on('chatPanelObj', (e, obj) => {
            $scope.shareList = [];
            $scope.shareListResult = true;
            $scope.id = obj.id;
            $scope.distMan = obj.distMan;
            getShareList();
            getUserID();
        });

        //获取当前用户ID
        const getUserID = () =>{
            $scope.getLoginUserInfo.getData({
            }).then(res => {
                $scope.userId = res.userId;
            });
        } 

        //列表接口
        const getShareList = () => {
            $scope.shareTaskDetailList.getData({
                id: $scope.id
            }).then(res => {
                $scope.shareList = res.body;
                $scope.shareListResult = false;
            });
        }

        //详情
        $scope.showDetail = () =>{
            $('#chatDetailShare').modal({ backdrop: 'static', keyboard: false });            
        }

        $scope.getSendList = arr =>{
            return arr.replace(/,/g, "   ")
        }

        //审核
        $scope.examine = () => {

        }

        //发红包
        $scope.handOutMoney = () => {

        }


        $scope.$on('$destroy', () => {
            window.removeEventListener('resize', resizeHeight);
        });

    });