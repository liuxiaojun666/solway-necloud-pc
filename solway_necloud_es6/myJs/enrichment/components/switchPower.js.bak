/**
 * [切换电站头]
 */
app.directive('switchPowerEnrich', ['myAjaxData', '$rootScope', (myAjaxData, $rootScope) => ({
    restrict: 'E',
    transclude: !0,
    replace: !0,
    scope: !0,
    templateUrl: baseUrl + '/tpl/enrichment/components/switchPower.html?_=20181017',
    controller($scope) {
        $rootScope.isGroup = 1;
        $rootScope.currentView = '00';
        $scope.$parent._getStationInfo = myAjaxData.getData({
            name: 'GETgetCurrentInfoNew',
            data: { currentView: '00', isGroup: 1 }
        });
        $scope.$parent._getStationInfo.then(result => {
            $scope.currentDataName = result.currentDataName;
            myAjaxData.setCurrentStationData(result);
            $scope.switchPowerCallback && $scope.switchPowerCallback(null, $scope);
        });

        $scope.$on('broadcastSwitchStation', (event, data) => {
            $scope.currentDataName = data.dataName;
            myAjaxData.setCurrentStationData({ currentDataName: data.dataName, currentSTID: data.dataId });
            $scope.reload();
            $scope.switchPowerCallback && $scope.switchPowerCallback(data.switchArguments);
        });
    }
})]);