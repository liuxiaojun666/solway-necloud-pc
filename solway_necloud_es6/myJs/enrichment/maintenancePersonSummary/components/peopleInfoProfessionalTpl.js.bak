ajaxData({
    //人员注册信息
    regInfo:{
        name: 'GETregInfo',
        data: {},
        later: true,
        onlyLatest: true
    },
    //故障  品牌 型号 维修记录
    
     
    //电站-专业运维人员-故障分析-月-曲线
    analysis_station_operation_person_ft_month_line:{
        name: 'GETanalysis_station_operation_person_ft_month_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    //电站-专业运维人员-品牌分析-月-曲线
    analysis_station_operation_person_manuf_month_line:{
        name: 'GETanalysis_station_operation_person_manuf_month_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    //电站-专业运维人员-型号分析-月-曲线
    analysis_station_operation_person_product_month_line:{
        name: 'GETanalysis_station_operation_person_product_month_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    //电站-专业运维人员-维修记录-月-列表
    analysis_station_operation_person_oprecord_month_list:{
        name: 'GETanalysis_station_operation_person_oprecord_month_list',
        data: {},
        later: true,
        onlyLatest: true
    },

    // 电站-专业运维人员-故障分析-年-曲线
    analysis_station_operation_person_ft_year_line:{
        name: 'GETanalysis_station_operation_person_ft_year_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 电站-专业运维人员-品牌分析-年-曲线
    analysis_station_operation_person_manuf_year_line:{
        name: 'GETanalysis_station_operation_person_manuf_year_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 电站-专业运维人员-型号分析-年-曲线
    analysis_station_operation_person_product_year_line:{
        name: 'GETanalysis_station_operation_person_product_year_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 电站-专业运维人员-维修记录-年-列表
    analysis_station_operation_person_oprecord_year_list:{
        name: 'GETanalysis_station_operation_person_oprecord_year_list',
        data: {},
        later: true,
        onlyLatest: true
    },

    // 电站-专业运维人员-故障分析-累计-曲线 
    analysis_station_operation_person_ft_accum_line:{
        name: 'GETanalysis_station_operation_person_ft_accum_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 电站-专业运维人员-品牌分析-累计-曲线
    analysis_station_operation_person_manuf_accum_line:{
        name: 'GETanalysis_station_operation_person_manuf_accum_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 电站-专业运维人员-型号分析-累计-曲线
    analysis_station_operation_person_product_accum_line:{
        name: 'GETanalysis_station_operation_person_product_accum_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 电站-专业运维人员-维修记录-累计-列表
    analysis_station_operation_person_oprecord_accum_list:{
        name: 'GETanalysis_station_operation_person_oprecord_accum_list',
        data: {},
        later: true,
        onlyLatest: true
    },
    
    //  公司-专业运维人员-故障分析-月-曲线
    analysis_company_operation_person_ft_month_line:{
        name: 'GETanalysis_company_operation_person_ft_month_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    //  公司-专业运维人员-品牌分析-月-曲线
    analysis_company_operation_person_manuf_month_line:{
        name: 'GETanalysis_company_operation_person_manuf_month_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    //  公司-专业运维人员-型号分析-月-曲线
    analysis_company_operation_person_product_month_line:{
        name: 'GETanalysis_company_operation_person_product_month_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    //  公司-专业运维人员-维修记录-月-列表
    analysis_company_operation_person_oprecord_month_list:{
        name: 'GETanalysis_company_operation_person_oprecord_month_list',
        data: {},
        later: true,
        onlyLatest: true
    },
    
    // 公司-专业运维人员-故障分析-年-曲线
    analysis_company_operation_person_ft_year_line:{
        name: 'GETanalysis_company_operation_person_ft_year_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 公司-专业运维人员-品牌分析-年-曲线
    analysis_company_operation_person_manuf_year_line:{
        name: 'GETanalysis_company_operation_person_manuf_year_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 公司-专业运维人员-型号分析-年-曲线 
    analysis_company_operation_person_product_year_line:{
        name: 'GETanalysis_company_operation_person_product_year_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 公司-专业运维人员-维修记录-年-列表
    analysis_company_operation_person_oprecord_year_list:{
        name: 'GETanalysis_company_operation_person_oprecord_year_list',
        data: {},
        later: true,
        onlyLatest: true
    },
    
    // 公司-专业运维人员-故障分析-累计-曲线
    analysis_company_operation_person_ft_accum_line:{
        name: 'GETanalysis_company_operation_person_ft_accum_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 公司-专业运维人员-品牌分析-累计-曲线
    analysis_company_operation_person_manuf_accum_line:{
        name: 'GETanalysis_company_operation_person_manuf_accum_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 公司-专业运维人员-型号分析-累计-曲线
    analysis_company_operation_person_product_accum_line:{
        name: 'GETanalysis_company_operation_person_product_accum_line',
        data: {},
        later: true,
        onlyLatest: true
    },
    // 公司-专业运维人员-维修记录-累计-列表
    analysis_company_operation_person_oprecord_accum_list:{
        name: 'GETanalysis_company_operation_person_oprecord_accum_list',
        data: {},
        later: true,
        onlyLatest: true
    }
}, {
        __serviceName__: 'peopleInfoTplProfessionalService'
    })('peopleInfoProfessionalCtrl', ['$scope', 'peopleInfoTplProfessionalService'], ($scope, myAjaxData) => {

        

        //接收参数，调接口
        $scope.$on('paramsPeopleInfoProfessional',(e,v)=>{
            $scope.beginTime = new Date()
            $scope.beginTime.showDate = ''
            $scope.endTime = new Date()
            $scope.endTime.showDate = ''

            $scope.userId = v.userId;
            $scope.diffGetData();
        })

        $scope.$on('clearDate',()=>{
            $scope.beginTime = null
            $scope.endTime = null
        })
        

        let faultPieEchart = echarts.init(document.getElementById('faultPieEchart'))
        let brandPieEchart = echarts.init(document.getElementById('brandPieEchart'))
        let modelPieEchart = echarts.init(document.getElementById('modelPieEchart'))

        const initFaultPieEchart = (a, b, c) => {
            const option = {
                title : {
                    text: '故障',
                    y:'center',
                    x:'left'
                },
                tooltip: {
                    trigger: 'item',
                    confine:true
                },
                legend: {
                    data:[a,b,c],
                    orient: 'vertical',
                    right: 10,
                    top: 30,
                },
                series: [
                    {
                        type: 'pie',
                        radius: ['25', '55px'],
                        center: ['50%', '50%'],
                        label: {
                            normal: {
                                show: false,
                                position: 'inside'
                            },
                            emphasis: {
                                show: false
                            }
                        },
                        lableLine: {
                            normal: {
                                show: false
                            },
                            emphasis: {
                                show: false
                            }
                        },
                        itemStyle:{
                            normal:{
                                
                            }
                        },
                        data: [
                            {
                                value:a,
                                name: a,
                                itemStyle: {
                                    normal: {
                                        color: '#e57d70'
                                    }
                                }
                            },
                            {
                                value: b,
                                name: b,
                                itemStyle: {
                                    normal: {
                                        color: '#a99bac'
                                    }
                                }
                            },
                            {
                                value:c,
                                name: c,
                                itemStyle: {
                                    normal: {
                                        color: '#efc185'
                                    }
                                }
                            }
                        ]
                    }
                ]
            };
            faultPieEchart.setOption(option)
            faultPieEchart.resize();
        }
        const initBrandPieEchart = (a, b, c) => {
            const option = {
                title : {
                    text: '品牌',
                    y:'center',
                    x:'left'
                },
                tooltip: {
                    trigger: 'item',
                    confine:true
                },
                legend: {
                    data:[a,b,c],
                    orient: 'vertical',
                    right: 10,
                    top: 30,
                },
                series: [
                    {
                        type: 'pie',
                        radius: ['25', '55px'],
                        center: ['50%', '50%'],
                        // animation:false,
                        label: {
                            normal: {
                                show: false,
                                position: 'inside'
                            },
                            emphasis: {
                                show: false
                            }
                        },
                        lableLine: {
                            normal: {
                                show: false
                            },
                            emphasis: {
                                show: false
                            }
                        },
                        itemStyle:{
                            normal:{
                                
                            }
                        },
                        data: [
                            {
                                value:a,
                                name: a,
                                itemStyle: {
                                    normal: {
                                        color: '#e57d70'
                                    }
                                }
                            },
                            {
                                value: b,
                                name: b,
                                itemStyle: {
                                    normal: {
                                        color: '#a99bac'
                                    }
                                }
                            },
                            {
                                value:c,
                                name: c,
                                itemStyle: {
                                    normal: {
                                        color: '#efc185'
                                    }
                                }
                            }
                        ]
                    }
                ]
            };
            brandPieEchart.setOption(option)
            brandPieEchart.resize();
        }

        const initModelPieEchart = (a, b, c) => {
            const option = {
                title : {
                    text: '型号',
                    y:'center',
                    x:'left'
                },
                tooltip: {
                    trigger: 'item',
                    confine:true
                },
                legend: {
                    data:[a,b,c],
                    orient: 'vertical',
                    right: 10,
                    top: 30,
                },
                series: [
                    {
                        type: 'pie',
                        radius: ['25', '55px'],
                        center: ['50%', '50%'],
                        label: {
                            normal: {
                                show: false,
                                position: 'inside'
                            },
                            emphasis: {
                                show: false
                            }
                        },
                        lableLine: {
                            normal: {
                                show: false
                            },
                            emphasis: {
                                show: false
                            }
                        },
                        itemStyle:{
                            normal:{
                                
                            }
                        },
                        data: [
                            {
                                value:a,
                                name: a,
                                itemStyle: {
                                    normal: {
                                        color: '#e57d70'
                                    }
                                }
                            },
                            {
                                value: b,
                                name: b,
                                itemStyle: {
                                    normal: {
                                        color: '#a99bac'
                                    }
                                }
                            },
                            {
                                value:c,
                                name: c,
                                itemStyle: {
                                    normal: {
                                        color: '#efc185'
                                    }
                                }
                            }
                        ]
                    }
                ]
            };
            modelPieEchart.setOption(option)
            modelPieEchart.resize();
        }

        initFaultPieEchart(1,2,3);
        initBrandPieEchart(1,2,3);
        initModelPieEchart(1,2,3);

        $scope.diffGetData = async()=>{
            // if (!$scope.initComplete) return;
            // await myAjaxData.timeout(0);
            
            const {dataType,dateType,dateTime,userId} = $scope; //dataType,0:电站1,2:公司集团  ; dateType,1:月，2：年，3：累计

            $scope.startEventTime = $scope.beginTime.showDate;
            $scope.endEventTime = $scope.endTime.showDate;

            if(dataType){//集团
                switch (dateType) {
                    case 1: 
                        //月
                        $scope.analysis_company_operation_person_ft_month_line.getData({ //故障
                            queryCode: 'analysis_company_operation_person_ft_month_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_company_operation_person_manuf_month_line.getData({ //品牌
                            queryCode: 'analysis_company_operation_person_manuf_month_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_company_operation_person_product_month_line.getData({ //型号
                            queryCode: 'analysis_company_operation_person_product_month_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_company_operation_person_oprecord_month_list.getData({ //维修
                            queryCode: 'analysis_company_operation_person_oprecord_month_list',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate,
                            startEventTime:$scope.startEventTime,
                            endEventTime:$scope.endEventTime
                        });
                        break;
                    case 2: 
                        //年
                        $scope.analysis_company_operation_person_ft_year_line.getData({ //故障
                            queryCode: 'analysis_company_operation_person_ft_year_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_company_operation_person_manuf_year_line.getData({ //品牌
                            queryCode: 'analysis_company_operation_person_manuf_year_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_company_operation_person_product_year_line.getData({ //型号
                            queryCode: 'analysis_company_operation_person_product_year_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_company_operation_person_oprecord_year_list.getData({ //维修
                            queryCode: 'analysis_company_operation_person_oprecord_year_list',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate,
                            startEventTime:$scope.startEventTime,
                            endEventTime:$scope.endEventTime
                        });
                        break;
                    case 3: 
                        //累计
                        $scope.analysis_company_operation_person_ft_accum_line.getData({ //故障
                            queryCode: 'analysis_company_operation_person_ft_accum_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_company_operation_person_manuf_accum_line.getData({ //品牌
                            queryCode: 'analysis_company_operation_person_manuf_accum_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_company_operation_person_product_accum_line.getData({ //型号
                            queryCode: 'analysis_company_operation_person_product_accum_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_company_operation_person_oprecord_accum_list.getData({ //维修
                            queryCode: 'analysis_company_operation_person_oprecord_accum_list',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate,
                            startEventTime:$scope.startEventTime,
                            endEventTime:$scope.endEventTime
                        });
                        break;
                    default:
                        break;
                }
            }else{//电站
                
                switch (dateType) {
                    case 1: 
                        //月
                        $scope.analysis_station_operation_person_ft_month_line.getData({ //故障
                            queryCode: 'analysis_station_operation_person_ft_month_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_station_operation_person_manuf_month_line.getData({ //品牌
                            queryCode: 'analysis_station_operation_person_manuf_month_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_station_operation_person_product_month_line.getData({ //型号
                            queryCode: 'analysis_station_operation_person_product_month_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_station_operation_person_oprecord_month_list.getData({ //维修
                            queryCode: 'analysis_station_operation_person_oprecord_month_list',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate,
                            startEventTime:$scope.startEventTime,
                            endEventTime:$scope.endEventTime
                        });
                        break;
                    case 2: 
                        //年
                        $scope.analysis_station_operation_person_ft_year_line.getData({ //故障
                            queryCode: 'analysis_station_operation_person_ft_year_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_station_operation_person_manuf_year_line.getData({ //品牌
                            queryCode: 'analysis_station_operation_person_manuf_year_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_station_operation_person_product_year_line.getData({ //型号
                            queryCode: 'analysis_station_operation_person_product_year_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_station_operation_person_oprecord_year_list.getData({ //维修
                            queryCode: 'analysis_station_operation_person_oprecord_year_list',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate,
                            startEventTime:$scope.startEventTime,
                            endEventTime:$scope.endEventTime
                        });
                        break;
                    case 3: 
                        //累计
                        $scope.analysis_station_operation_person_ft_accum_line.getData({ //故障
                            queryCode: 'analysis_station_operation_person_ft_accum_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_station_operation_person_manuf_accum_line.getData({ //品牌
                            queryCode: 'analysis_station_operation_person_manuf_accum_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_station_operation_person_product_accum_line.getData({ //型号
                            queryCode: 'analysis_station_operation_person_product_accum_line',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate
                        });
                        $scope.analysis_station_operation_person_oprecord_accum_list.getData({ //维修
                            queryCode: 'analysis_station_operation_person_oprecord_accum_list',
                            queryType: 1,
                            userid:userId,
                            date: dateTime.showDate,
                            startEventTime:$scope.startEventTime,
                            endEventTime:$scope.endEventTime
                        });
                        break;
                    default:
                        break;
                }
            }
        }

        //公司-月
        $scope.analysis_company_operation_person_ft_month_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_company_operation_person_manuf_month_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_company_operation_person_product_month_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_company_operation_person_oprecord_month_list.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }

        //公司-年
        $scope.analysis_company_operation_person_ft_year_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_company_operation_person_manuf_year_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_company_operation_person_product_year_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_company_operation_person_oprecord_year_list.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }

        //公司-累计
        $scope.analysis_company_operation_person_ft_accum_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_company_operation_person_manuf_accum_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_company_operation_person_product_accum_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_company_operation_person_oprecord_accum_list.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }

        //电站-月
        $scope.analysis_station_operation_person_ft_month_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_station_operation_person_manuf_month_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_station_operation_person_product_month_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_station_operation_person_oprecord_month_list.getDataCallback = (success, res) => {
            if (!success) return;
            $scope.datasource = res.body.data;
            $scope.column = [
                {
                    title: '时间',
                    width: '25%',
                    dataIndex: 'event_time',
                    align: 'left',
                    // render(text, record, index) {
                    //     return `<span class="alert-name" id="${record.id}">${text}</span>`
                    // }
                },
                {
                    title: '电站名称',
                    dataIndex: 'st_name',
                    
                },
                {
                    title: '设备型号',
                    dataIndex: 'product_name',
                    
                },
                {
                    title: '设备名称',
                    dataIndex: 'eq_name',
                    align: 'right',
                },
                {
                    title: '设备故障',
                    dataIndex: 'ft_name',
                }
                
            ];
    
            console.log(res)
        }

        //电站-年
        $scope.analysis_station_operation_person_ft_year_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_station_operation_person_manuf_year_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_station_operation_person_product_year_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_station_operation_person_oprecord_year_list.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }

        //电站-累计
        $scope.analysis_station_operation_person_ft_accum_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_station_operation_person_manuf_accum_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_station_operation_person_product_accum_line.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }
        $scope.analysis_station_operation_person_oprecord_accum_list.getDataCallback = (success, res) => {
            if (!success) return;
            console.log(res)
        }

        

        $scope.$on('$destroy', () => {
            $scope.beginTime = null
            $scope.endTime = null
            // window.removeEventListener('resize', resizeHeight);
        });

    });