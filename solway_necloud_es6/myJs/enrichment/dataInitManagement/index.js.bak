ajaxData({
    dataInitList:{
        name: 'GETdataInitList',
        data: {},
        later: true
    }
}, {})('dataInitManagementCtrl', ['$scope', 'myAjaxData', 'actionRecord', '$timeout','toaster'], ($scope, myAjaxData, historicalRecord, $timeout,toaster) => {
    $scope.moduleName = '数据初始化';
    
    $scope.getListData = () =>{
        $scope.dataInitList.getData({
            pageIndex : 0,
            pageSize : 10,
            keyWords : $scope.keyWords,
        }).then(res=>{
            console.log(res)
        });
    }

    $scope.getListData();
    
    $scope.column = [
        {
            title: '<label class="i-checks m-b-none"><input type="checkbox"><i style="background:transparent;"></i></label>',
            dataIndex: '',
            width: '60px',
            align: 'center',
            checkboxName: 'xbCheckboxName',
            render(text, record, index) {
                return '<label class="i-checks m-b-none"><input data-id="' + record.id + '" name="xbCheckboxName" type="checkbox" /><i style="background:transparent;"></i></label>';
            }
        },{
            title: '公司名称',
            dataIndex: 'companyName',
            width:'20%',
            sort: !0,
            align: 'center'
        },{
            title: '电站名称',
            dataIndex: 'stationName',
            sort: !0,
            align: 'center'
        },{
            title: '设备名称',
            dataIndex: 'deviceName',
            sort: !0,
            align: 'center'
        },{
            title: '开始时间',
            dataIndex: 'beginTime',
            align: 'center',
            render(text, item) {
                return text?new Date(text).Format('yyyy-MM-dd'):'-';
            }
        },{
            title: '结束时间',
            dataIndex: 'endTime',
            align: 'center',
            render(text, item) {
                return text?new Date(text).Format('yyyy-MM-dd'):'-';
            }
        },{
            title: '任务生成时间',
            dataIndex: 'createTime',
            align: 'center',
            render(text, item) {
                return text?new Date(text).Format('yyyy-MM-dd hh:mm:ss'):'-';
            }
        },{
            title: '任务执行时间',
            dataIndex: 'executeTime',
            align: 'center',
            render(text, item) {
                return text?new Date(text).Format('yyyy-MM-dd hh:mm:ss'):'-';
            }
        },{
            title: '类型',
            dataIndex: 'typeName',
            align: 'center',
            sort: !0
        },{
            title: '任务执行情况',
            dataIndex: 'statusName',
            align: 'center',
            sort: !0
        },{
            title: '操作',
            dataIndex: '',
            align: 'center',
            sort: !0,
            render(text, item, index) {
                return `
                <div class="clearfix">
                    <i class="iconfont edit icon-bianji-copy" style="font-size: 18px;color:#1ddabe;margin-right:15px;" title="授权"></i>
                    <i class="iconfont edit icon-shanchu1" style="font-size: 18px;color:#ff8080;"></i>
                </div>
                `
            },
        }
    ]

    $scope.trClick = (item, index, event) => {
        if(event.target.className.includes('icon-bianji-copy')) {
            $scope.editDataInitModel = true;
            $scope.$broadcast('editDataInitBroad',item);
        }else if(event.target.className.includes('icon-shanchu1')) {
            // $solway.confirm({ message: '确定删除此箱变？' }, () => {
            //     deleteXB([item.id])
            // });
        }
    };

   
    $timeout(() => {
        $('.ng-clock').removeClass('ng-clock');
    },2000);
});