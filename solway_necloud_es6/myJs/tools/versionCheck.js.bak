; (function () {
    function download(url, callback) {
        var oReq = new XMLHttpRequest();
        oReq.open("GET", url, true);
        oReq.responseType = "blob";
        oReq.onload = function (oEvent) {
            var _blob = new Blob([oReq.response]);
            var reader = new FileReader();
            reader.onload = function (event) {
                var content = reader.result;
                callback && callback(content);
            };
            reader.readAsText(_blob);
        };
        oReq.send();
    };
    if (!window.localStorage.stamp) {
        window.location.href = 'http://' + window.location.host + '/Login/logout.htm';
    }
    download('/stamp.txt?_=' + Math.random(), function (str) {
        var stamp = str;
        if (stamp !== window.localStorage.stamp) {
            if ((location.host.split(':')[1] + '')) return;
            alert('页面缓存或受非正常访问，请刷新登录页后重新登录！');
            return window.location.href = 'http://' + window.location.host + '/Login/logout.htm';
        }
    });
})();